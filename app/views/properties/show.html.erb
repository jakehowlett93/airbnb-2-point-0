
<div class="container">
  <%= link_to "Back to Properties", properties_path %>
  <h1><%= "#{@property.name}"%></h1>
  <div class="container" style="height: 75vh; background-color: white;">
    <img src="https://a0.muscache.com/im/pictures/f7388724-65a9-4ad8-9b88-9708421224a0.jpg?im_w=720" alt="" class="whatever">
  </div>
  <div class="d-flex flex-wrap justify-content-between">
    <div class="property-details" style="width: 50%; padding: 10px; background-color: white;">
      <h3><strong>Â£<%= @property.price_per_night.round(2) %></strong> / night</h3>
      <p>Hosted by: <%= @property.user.first_name %> <%= @property.user.last_name %></p>
      <p><%= @property.summary %></p>
      <p><%= @property.address %></p>
      <p>Bedrooms: <%= @property.total_bedrooms %></p>
      <p>Bathrooms: <%= @property.total_bathrooms %></p>
      <p>Max Guests: <%= @property.total_occupancy %></p>
      <ul class="property-feature-list">
        <li <%= @property.has_kitchen ? "" : 'style=color:grey;' %>><%= @property.has_kitchen ? 'ðŸ˜Š Has a Kitchen' : 'ðŸ˜ž No Kitchen' %></li>
        <li <%= @property.has_internet ? "" : 'style=color:grey;' %>><%= @property.has_internet ? "ðŸ˜Š Has Internet" : "ðŸ˜ž No Internet" %></li>
        <li <%= @property.has_aircon ? "" : 'style=color:grey;' %>><%= @property.has_aircon ? "ðŸ˜Š Has Air Con" : "ðŸ˜ž No Air Con" %></li>
        <li  <%= @property.has_heating ? "" : 'style=color:grey;' %>><%= @property.has_heating ? "ðŸ˜Š Has Heating" : "ðŸ˜ž No Heating" %></li>
      </ul>
    </div>
    <% if current_user == @property.user %>
      <div class="owner-controls" style="width: 50%; padding: 10px; background-color: white;">
        <h2>You own this property</h2>
        <%= link_to "Edit", edit_property_path(@property), class: "btn btn-success" %>
        <%= link_to "Delete", property_path(@property), method: "delete", class: "btn btn-danger", data: { confirm: "Remove This Property?" }%>
      <div>
    <% else %>
      <div class="booking-form" style="width: 50%; padding: 10px; background-color: white;">
        <h2>Booking Form</h2>
        <%= render "bookings/booking_form", property: @property, booking: @booking %>
      </div>
    <% end %>
     <div class="mt-2 py-2 background-color: white justify-content-between">
    <h1>Reviews of the property</h1>
    <% numberofreviews = @property.reviews.count %>
    <% sumofreviewratings = @property.reviews.map(&:rating).sum %>
    <h2>Overall rating of the property is <%= sumofreviewratings.fdiv(numberofreviews) %> </h2>
    
    <% @property.reviews.each do |review| %>
     <div class="mt-2"> <p><%= review.rating %> stars Reviewed by
      <strong><%="#{review.booking.user.first_name} #{review.booking.user.last_name}"%></strong> 
      </p></div>
     
      <div><%= review.content %></div>
  <% end %>
     </div>
  </div>
</div>

